#!/usr/bin/env bash

# a script to write the contents of a directory in tree form and save it to a .txt file

### CONSTANTS

date="$(date +%Y%m%d)"
biwhite=$(tput bold)$(tput setaf 7)
bired=$(tput bold)$(tput setaf 1)
color_off=$(tput sgr0)

### FUNCTIONS

makedrivetree()
{
	local drive ;
  for drive ; do
    if [ -d "$drive" ] ; then
      output=$HOME/Google_Drive/05_DriveContents_TXT/${drive##*/}_contents_"$date".txt
      if tree --filelimit 30 --si --du -U -Q -o "$output" "$drive" ; then
        printf "%sdone. moving to next drive.\n" "$biwhite" >&2
				cp -va "$output" "$drive"
			else
        printf "%sError" "$bired" >&2
      fi
    else
      printf "%sError $drive does not exist.\n" "$bired"
    fi
  done
}

#call the function(s)

makedrivetree "$@"

exit "$?"
