#!/usr/bin/env bash

# a script to write the contents of a directory in tree form and save it to a .txt file

### CONSTANTS

date="$(date +%Y%m%d)"
biwhite='\e[1;97m'
bired='\e[1;91m'
color_off='\e[0m'

### FUNCTIONS

makedrivetree()
{
	local drive ;
  for drive ; do
    if [ -d "$drive" ] ; then
      output=$HOME/Desktop/${drive##*/}_contents_${date}
      if tree --filelimit 30 --si --du -U -Q -o "$output" "$drive" ; then
        printf "%sdone. moving to next drive.\n" "$biwhite" >&2
			else
        printf "%Error" "$bired" >&2
      fi
    else
      printf "%sError $drive does not exist.\n" "$bired"
    fi
  done
}

#call the function(s)

makedrivetree "$@"

exit "$?"
