biwhite=$(tput bold)$(tput setaf 7)
#bired=$(tput bold)$(tput setaf 1)
color_off=$(tput sgr0)
date="$(date +%Y%m%d)"


while [[ $# -gt 0 ]] ; do

input="$1" #name $input as the first arugment sent to script

if [ -d "$input" ] ; then 	#if argment is a directory, run md5deep
  target="${input%/}" #strip the trailing /, if any
  target="${target##*/}" #drop the leading directory componenets i.e. get basename
  output="$input"/"$target"_"$date"_checksums.md5 #set .md5 file to $output
  echo
  printf "%s%s%s is a directory.\n" "$biwhite" "${input##*/}" "$color_off"
  printf "Making checksums of all files in %s%s%s\n" "$biwhite" "$input" "$color_off"
  printf "Writing to %s%s%s\n" "$biwhite" "$output" "$color_off"
  md5deep -bre "$input" >> "$output" #create md5 hash (hashes) of $input and write results to $output
fi
shift

done
